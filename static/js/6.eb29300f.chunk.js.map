{"version":3,"sources":["App/Components/TagChip.tsx","App/Components/SearchResultCard.tsx","App/Types/RecipeTag.ts","App/Icons/filter-search.svg","App/Pages/SearchPage.tsx","App/Components/SettingsDialog.tsx"],"names":["TagChip","props","state","variant","initialValue","selected","this","size","label","component","Link","to","link","clickable","className","color","onClick","toggleChip","setState","onDeselect","onSelect","React","Component","SearchResultCard","classes","Card","resultCard","id","htmlId","CardContent","resultCardContent","info","Typography","title","tags","map","tag","i","key","overviewContainer","overview","imageContainer","imageContainer2","image","src","resultImg","alt","message","subMessage","withStyles","theme","createStyles","display","flexDirection","padding","paddingBottom","flex","margin","spacing","justifyContent","minWidth","position","top","left","bottom","right","width","height","objectFit","boxShadow","shadows","borderRadius","overflowX","flexWrap","flexShrink","breakpoints","up","marginRight","marginTop","zIndex","marginLeft","maxWidth","paddingTop","overflow","content","background","palette","paper","flexGrow","textDecoration","validTags","_extends","Object","assign","target","arguments","length","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","RedirectEnum","createElement","d","_ref","svgRef","viewBox","ref","ForwardRef","forwardRef","SettingsDialog","Dialog","open","onClose","onCancel","scroll","DialogTitle","DialogContent","children","DialogActions","Button","onApply","topRef","createRef","listRef","outerListRef","SearchPage","unconfirmedSettings","items","selectedTags","Set","query","modalOpen","redirect","STAY","showReturnTop","window","addEventListener","resizeListSpacing","bind","updateQueries","prevProps","location","pathname","search","removeEventListener","additionalState","options","URLSearchParams","q","get","getAll","recipeTags","filter","isValidTag","newState","http","process","resp","pipeline","pipe","StreamArray","withParser","searchResults","on","data","result","value","resultHasTags","searchCompare","add","summary","Array","from","push","resultTags","neededTag","has","currentSimilarity","maxSimilarity","Infinity","t","stringSimilarity","titleChunkArray","split","titleArray","substring","s1","s2","toLowerCase","costs","lastValue","j","newValue","charAt","Math","min","longer","shorter","longerLength","editDistance","shouldOpen","setModalOpen","UPDATE_SETTINGS","current","resetAfterIndex","newQueryParams","append","forEach","toString","root","results","sampleResult","list","outerRef","itemCount","overscanCount","innerElementType","style","rest","onScroll","scrollOffset","estimatedItemSize","innerWidth","itemSize","index","getResultHeight","Fab","aria-label","bigIcon","filterFab","SvgIcon","FilterSearchIcon","Zoom","in","upFab","scrollTo","behavior","filterDialog","applyFilter","cancelFilter","searchSection","SearchBar","searchBar","placeholder","type","callback","setQueryFilter","tagSection","Tooltip","filterTag","selectTag","deselectTag","delete","item","document","getElementById","compStyle","getComputedStyle","heightString","marginString","parseFloat","withRouter","between","only","marginBottom","alignSelf","visibility","transform"],"mappings":"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","file":"static/js/6.eb29300f.chunk.js","sourcesContent":["import React from 'react';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport { Link } from 'react-router-dom';\r\nimport { RecipeTag } from '../Types/RecipeTag';\r\n\r\ninterface CommonProps {\r\n    label: RecipeTag;\r\n    className?: string;\r\n}\r\ninterface TagPropsLink extends CommonProps {\r\n    variant: \"link\";\r\n    link: string;\r\n}\r\ninterface TagPropsSelector extends CommonProps {\r\n    variant: \"selector\";\r\n    onSelect: (label: RecipeTag) => void;\r\n    onDeselect: (label: RecipeTag) => void;\r\n    initialValue?: boolean;\r\n}\r\ntype TagChipProps = TagPropsLink | TagPropsSelector;\r\n\r\ninterface TagChipState {\r\n    selected?: boolean;\r\n}\r\n\r\n\r\nexport default class TagChip extends React.Component<TagChipProps, TagChipState>{\r\n    constructor(props: TagChipProps) {\r\n        super(props);\r\n        this.state = this.props.variant === \"selector\" && this.props.initialValue ? { selected: true } : {};\r\n    }\r\n    render() {\r\n        if (this.props.variant === \"link\") {\r\n            return (\r\n                <Chip size=\"small\" label={this.props.label} component={Link} to={this.props.link as string} clickable className={this.props.className} />\r\n            );\r\n        } else if (this.props.variant === \"selector\") {\r\n            if (this.state.selected) {\r\n                return (\r\n                    <Chip size=\"small\" color=\"secondary\" label={this.props.label} clickable className={this.props.className} onClick={() => this.toggleChip()}></Chip>\r\n                );\r\n            } else {\r\n                return (\r\n                    <Chip size=\"small\" variant=\"outlined\" label={this.props.label} clickable className={this.props.className} onClick={() => this.toggleChip()}></Chip>\r\n                );\r\n            }\r\n        }\r\n    }\r\n    toggleChip() {\r\n        if (this.props.variant !== \"selector\") return;\r\n\r\n        if (this.state.selected) {\r\n            this.setState({ selected: false });\r\n            this.props.onDeselect(this.props.label);\r\n        } else {\r\n            this.setState({ selected: true });\r\n            this.props.onSelect(this.props.label);\r\n        }\r\n    }\r\n}","import React from 'react';\r\nimport { Theme, createStyles, WithStyles, withStyles } from '@material-ui/core/styles';\r\nimport { Card, CardContent, Typography } from '@material-ui/core';\r\nimport TagChip from './TagChip';\r\nimport { RecipeTag } from '../Types/RecipeTag';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst useStyles = (theme: Theme) => createStyles({\r\n    \"resultCardContent\": {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        padding: \"inherit\",\r\n        \"&:last-child\": {\r\n            paddingBottom: 0\r\n        }\r\n    },\r\n    \"info\": {\r\n        flex: \"70%\",\r\n        margin: theme.spacing(1.5),\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n        minWidth: 0,\r\n    },\r\n    \"image\": {\r\n        position: \"absolute\",\r\n        top: 0,\r\n        left: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        objectFit: \"cover\",\r\n        boxShadow: theme.shadows[1],\r\n        borderRadius: \"4px\",\r\n    },\r\n    \"tags\": {\r\n        display: \"none\",\r\n        width: \"100%\",\r\n        overflowX: \"auto\",\r\n        flexDirection: \"row\",\r\n        flexWrap: \"nowrap\",\r\n        flexShrink: 0,\r\n        [theme.breakpoints.up('sm')]: {\r\n            display: \"flex\",\r\n        },\r\n    },\r\n    \"tag\": {\r\n        marginRight: theme.spacing(1),\r\n        marginTop: theme.spacing(1),\r\n        position: \"relative\",\r\n        zIndex: 999,\r\n    },\r\n    \"imageContainer\": {\r\n        flex: \"30%\",\r\n        margin: theme.spacing(1.5),\r\n        marginLeft: 0,\r\n        minWidth: 0,\r\n        maxWidth: \"17.5vw\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n    },\r\n    \"imageContainer2\": {\r\n        position: \"relative\",\r\n        width: \"100%\",\r\n        paddingTop: \"66.66%\",\r\n    },\r\n    \"title\": {\r\n        flexShrink: 0,\r\n    },\r\n    \"overview\": {\r\n        height: \"100%\",\r\n        overflow: \"hidden\",\r\n        \"&::after\": {\r\n            content: 'no-open-quote',\r\n            width: \"100%\",\r\n            height: \"min(1.5rem, 100%)\",\r\n            position: \"absolute\",\r\n            left: 0,\r\n            bottom: 0,\r\n            background: `linear-gradient(transparent, ${theme.palette.background.paper})`,\r\n        },\r\n    },\r\n    \"overviewContainer\": {\r\n        flexGrow: 1,\r\n        height: 0,\r\n        display: \"none\",\r\n        marginTop: theme.spacing(1),\r\n        position: \"relative\",\r\n        [theme.breakpoints.up(\"sm\")]: {\r\n            display: \"block\"\r\n        },\r\n    },\r\n    \"resultCard\": {\r\n        width: \"100%\",\r\n        position: \"relative\",\r\n    },\r\n    \"link\": {\r\n        color: \"inherit\",\r\n        textDecoration: \"none\",\r\n        \"&:visited\": {\r\n            color: \"inherit\"\r\n        },\r\n        position: \"absolute\",\r\n        bottom: 0,\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n    }\r\n});\r\ninterface SearchResultPropsCommon extends WithStyles<typeof useStyles> {\r\n    className?: string;\r\n    htmlId?: string;\r\n}\r\ninterface SearchResultPropsRecipeVariant extends SearchResultPropsCommon{\r\n    variant: \"recipe\";\r\n    tags: RecipeTag[];\r\n    title: string;\r\n    id: string;\r\n    resultImg: string;\r\n    overview: string;\r\n}\r\ninterface SearchResultPropsMessageVariant extends SearchResultPropsCommon {\r\n    variant: \"message\";\r\n    message: string;\r\n    subMessage?: string;\r\n}\r\ntype SearchResultProps = SearchResultPropsMessageVariant | SearchResultPropsRecipeVariant;\r\n\r\nclass SearchResultCard extends React.Component<SearchResultProps>{\r\n    private classes: Record<keyof ReturnType<typeof useStyles>, string>;\r\n    constructor(props: SearchResultProps) {\r\n        super(props);\r\n        this.classes = this.props.classes;\r\n    }\r\n    render() {\r\n        if (this.props.variant === \"recipe\") {\r\n            return (\r\n                <Card className={`${this.classes.resultCard} ${this.props.className}`} id={this.props.htmlId}>\r\n                    <CardContent className={this.classes.resultCardContent}>\r\n                        <div className={this.classes.info}>\r\n                            <Typography className={this.classes.title} variant=\"h5\">{this.props.title}</Typography>\r\n                            <div className={this.classes.tags}>\r\n                                {this.props.tags.map((tag, i) => {\r\n                                    return <TagChip variant=\"link\" label={tag} key={i} link={`/recipes?tags=${tag}`} className={this.classes.tag} />\r\n                                })}\r\n                            </div>\r\n                            <div className={this.classes.overviewContainer}>\r\n                                <Typography className={this.classes.overview}>{this.props.overview}</Typography>\r\n                            </div>\r\n                        </div>\r\n                        <div className={this.classes.imageContainer}>\r\n                            <div className={this.classes.imageContainer2}>\r\n                                <img className={this.classes.image} src={this.props.resultImg} alt={this.props.title + \".png\"}></img>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </CardContent>\r\n                    <Link className={this.classes.link} to={`/recipe/${this.props.id}`}></Link>\r\n                </Card>\r\n            );\r\n        }else if(this.props.variant === \"message\"){\r\n            return (\r\n                <Card className={`${this.classes.resultCard} ${this.props.className}`} id={this.props.htmlId}>\r\n                <CardContent className={this.classes.resultCardContent}>\r\n                    <div className={this.classes.info}>\r\n                        <Typography className={this.classes.title} variant=\"h5\">{this.props.message}</Typography>\r\n                        <div className={this.classes.overviewContainer}>\r\n                            <Typography className={this.classes.overview}>{this.props.subMessage}</Typography>\r\n                        </div>\r\n                    </div>\r\n                    <div className={this.classes.imageContainer}>\r\n                        <div className={this.classes.imageContainer2}>\r\n                        </div>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default withStyles(useStyles)(SearchResultCard);","export const validTags = [\r\n    \"Breakfast\",\r\n    \"Lunch\",\r\n    \"Dinner\",\r\n    \"Snack\",\r\n    \"Dessert\",\r\n    \"Side\",\r\n    \"Recommended\",\r\n    \"Mexican\",\r\n    \"American\",\r\n    \"Italian\",\r\n    \"French\",\r\n    \"Indian\",\r\n    \"Chinese\",\r\n    \"Japanese\",\r\n    \"Vegan\",\r\n    \"Vegetarian\",\r\n    \"Seafood\",\r\n    \"Meat\",\r\n    \"Easy\",\r\n    \"Medium\",\r\n    \"Difficult\",\r\n    \"Fast\",\r\n    \"Slow\",\r\n    \"Bread\",\r\n    \"Eggs\",\r\n] as const;\r\nexport type RecipeTag = typeof validTags[number];\r\nexport function isValidTag(tag: string): tag is RecipeTag {\r\n    return validTags.indexOf(tag as RecipeTag) !== -1;\r\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m 16.257849,12.916964 c -0.631476,-0.028 -1.272887,0.08349 -1.869997,0.347559 -0.982096,0.43433 -1.815762,1.345024 -2.157852,2.356154 -0.307584,0.909187 -0.30716,1.821909 0.0043,2.759151 0.580845,1.748072 2.440572,2.905278 4.298647,2.675992 0.582979,-0.07194 0.918776,-0.166864 1.454206,-0.413659 l 0.392336,-0.181243 0.722837,0.72497 0.724971,0.722838 0.586373,-0.58424 L 21,20.740246 20.27503,20.015274 19.552192,19.290306 19.731301,18.897968 c 0.523718,-1.136217 0.582579,-2.239992 0.179112,-3.345523 -0.202346,-0.554442 -0.435187,-0.933725 -0.850774,-1.377444 -0.726651,-0.77584 -1.749338,-1.211369 -2.801797,-1.258037 z m -0.181243,1.635447 c 0.918312,-0.0047 1.80263,0.50893 2.194101,1.313476 0.715875,1.471259 -0.09547,3.1954 -1.658902,3.524634 -1.718637,0.36192 -3.230859,-1.0788 -2.936129,-2.797531 0.184152,-1.073896 0.932566,-1.82231 2.006461,-2.006462 0.131198,-0.0225 0.263281,-0.03344 0.394469,-0.03412 z M 2.9999999,5.9999998 v 2 H 20.999999 v -2 z M 5.9999998,11 v 2 h 6.6901042 c 0.361323,-0.309136 0.746378,-0.583811 1.16927,-0.770834 0.746388,-0.330086 1.549198,-0.469895 2.338543,-0.434895 0.621857,0.02757 1.232008,0.170476 1.802083,0.408854 V 11 Z m 4,5 v 2 h 1.0104162 c -0.145276,-0.672872 -0.171818,-1.339462 -0.05729,-2 z\"\n});\n\nvar SvgFilterSearch = function SvgFilterSearch(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgFilterSearch, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/filter-search.e7c31c44.svg\";\nexport { ForwardRef as ReactComponent };","import React, { forwardRef } from 'react';\r\nimport { Theme, createStyles, WithStyles, withStyles } from '@material-ui/core/styles';\r\nimport SearchResultCard from '../Components/SearchResultCard';\r\nimport { withRouter, RouteComponentProps, Redirect } from 'react-router';\r\nimport { RecipeTag, isValidTag } from '../Types/RecipeTag';\r\nimport { Fab, SvgIcon, Tooltip, Typography, Zoom } from '@material-ui/core';\r\nimport { ReactComponent as FilterSearchIcon } from '../Icons/filter-search.svg';\r\nimport SettingsDialog from '../Components/SettingsDialog';\r\nimport { validTags } from '../Types/RecipeTag';\r\nimport TagChip from '../Components/TagChip';\r\nimport SearchBar from '../Components/SearchBar';\r\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\r\nimport AutoSizer from 'react-virtualized-auto-sizer';\r\nimport { VariableSizeList } from 'react-window';\r\nimport { RecipeInfo } from '../Types/RecipeInfo';\r\nimport StreamArray from 'stream-json/streamers/StreamArray';\r\nimport http from 'http';\r\n\r\nconst BASE_SIMILARITY = 0.9;\r\n\r\nconst useStyles = (theme: Theme) => {\r\n    return createStyles({\r\n        \"bigIcon\": {\r\n            position: \"absolute\",\r\n            bottom: 0,\r\n            [theme.breakpoints.between('xs', 'sm')]: {\r\n                \"& > span > svg\": {\r\n                    width: \"1em\",\r\n                    height: \"1em\"\r\n                },\r\n                width: \"56px\",\r\n                height: \"56px\",\r\n                margin: theme.spacing(4),\r\n            },\r\n            [theme.breakpoints.only('md')]: {\r\n                \"& > span > svg\": {\r\n                    width: \"1.1em\",\r\n                    height: \"1.1em\"\r\n                },\r\n                width: \"62px\",\r\n                height: \"62px\",\r\n                margin: theme.spacing(5),\r\n            },\r\n            [theme.breakpoints.only('lg')]: {\r\n                \"& > span > svg\": {\r\n                    width: \"1.2em\",\r\n                    height: \"1.2em\"\r\n                },\r\n                width: \"67px\",\r\n                height: \"67px\",\r\n                margin: theme.spacing(5.5),\r\n            },\r\n            [theme.breakpoints.only('xl')]: {\r\n                \"& > span > svg\": {\r\n                    width: \"1.3em\",\r\n                    height: \"1.3em\"\r\n                },\r\n                width: \"73px\",\r\n                height: \"73px\",\r\n                margin: theme.spacing(6),\r\n            },\r\n            [theme.breakpoints.only('xxl')]: {\r\n                \"& > span > svg\": {\r\n                    width: \"1.45em\",\r\n                    height: \"1.45em\"\r\n                },\r\n                width: \"81px\",\r\n                height: \"81px\",\r\n                margin: theme.spacing(6.5),\r\n            },\r\n            [theme.breakpoints.only('xxxl')]: {\r\n                \"& > span > svg\": {\r\n                    width: \"1.7em\",\r\n                    height: \"1.7em\"\r\n                },\r\n                width: \"95px\",\r\n                height: \"95px\",\r\n                margin: theme.spacing(7),\r\n            },\r\n            [theme.breakpoints.only('xxxxl')]: {\r\n                \"& > span > svg\": {\r\n                    width: \"2.5em\",\r\n                    height: \"2.5em\"\r\n                },\r\n                width: \"140px\",\r\n                height: \"140px\",\r\n                margin: theme.spacing(7.5),\r\n            }\r\n        },\r\n        \"filterFab\": {\r\n            right: 0,\r\n        },\r\n        \"upFab\": {\r\n            left: 0,\r\n        },\r\n        \"tagSection\": {\r\n            \"& > *\": {\r\n                marginBottom: theme.spacing(1),\r\n            }\r\n        },\r\n        \"filterTag\": {\r\n            \"&:not(:last-child)\": {\r\n                marginRight: theme.spacing(0.5),\r\n            },\r\n        },\r\n        \"searchSection\": {\r\n\r\n        },\r\n        \"searchBar\": {\r\n            \"& > div\": {\r\n                marginLeft: 0,\r\n                marginRight: 0,\r\n            }\r\n        },\r\n        \"root\": {\r\n            width: \"100%\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            flex: \"1 1 auto\",\r\n            overflow: \"auto\",\r\n        },\r\n        \"results\": {\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            alignSelf: \"center\",\r\n        },\r\n        \"filterDialog\": {\r\n            \"& .MuiDialog-paperWidthSm\": {\r\n                maxWidth: \"400px\",\r\n            }\r\n        },\r\n        \"sampleResult\": {\r\n            position: \"absolute\",\r\n            left: 0,\r\n            top: 0,\r\n            visibility: \"hidden\",\r\n            zIndex: -999,\r\n        },\r\n        \"result\": {\r\n            padding: theme.spacing(1.5, 0),\r\n        },\r\n        \"list\": {\r\n            \"& > div\": {\r\n                transform: \"translateX(26.25%)\",\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\nconst topRef = React.createRef<HTMLDivElement>();\r\nconst listRef = React.createRef<VariableSizeList>();\r\nconst outerListRef = React.createRef<HTMLDivElement>();\r\n\r\nenum RedirectEnum {\r\n    STAY,\r\n    UPDATE_SETTINGS\r\n}\r\n\r\ntype SearchPageProps = RouteComponentProps & WithStyles<typeof useStyles>;\r\n\r\ninterface SearchPageState {\r\n    selectedTags: Set<RecipeTag>;\r\n    query: string;\r\n    modalOpen: boolean;\r\n    redirect: RedirectEnum;\r\n    showReturnTop: boolean;\r\n}\r\n\r\nclass SearchPage extends React.Component<SearchPageProps, SearchPageState> {\r\n    private classes: Record<keyof ReturnType<typeof useStyles>, string>;\r\n    private unconfirmedSettings: { query: string, tags: Set<RecipeTag> };\r\n    private items: JSX.Element[];\r\n    constructor(props: SearchPageProps) {\r\n        super(props);\r\n        this.state = { selectedTags: new Set<RecipeTag>(), query: \"\", modalOpen: false, redirect: RedirectEnum.STAY, showReturnTop: false };\r\n        this.classes = this.props.classes;\r\n        this.items = [];\r\n        this.unconfirmedSettings = { query: \"\", tags: new Set<RecipeTag>() };\r\n    }\r\n    componentDidMount() {\r\n        window.addEventListener('resize', this.resizeListSpacing.bind(this))\r\n        this.updateQueries();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: SearchPageProps) {\r\n        if (this.props.location.pathname === prevProps.location.pathname && this.props.location.search !== prevProps.location.search) {\r\n            this.updateQueries();\r\n        }\r\n    }\r\n    componentWillUnmount() {\r\n        window.removeEventListener(\"resize\", this.resizeListSpacing.bind(this));\r\n    }\r\n    updateQueries(additionalState?: Partial<SearchPageState>) {\r\n        let options = new URLSearchParams(this.props.location.search);\r\n        let q = options.get('q');\r\n        let tags = options.getAll('tags');\r\n        let recipeTags = new Set(tags.filter(tag => isValidTag(tag)) as RecipeTag[]);\r\n        let newState: SearchPageState = { ...this.state };\r\n        if (!q) q = \"\";\r\n        newState = { ...newState, query: q };\r\n        this.unconfirmedSettings.query = q;\r\n        if (recipeTags.size > 0) {\r\n            newState = { ...newState, selectedTags: recipeTags };\r\n            this.unconfirmedSettings.tags = recipeTags;\r\n        }\r\n        http.get(`${process.env.REACT_APP_API}/recipe_data.json`, (resp) => {\r\n            let pipeline = resp.pipe(StreamArray.withParser());\r\n            let searchResults = new Set<JSX.Element>();\r\n            pipeline.on('data', data => {\r\n                let result: RecipeInfo & { id: string } = data.value;\r\n                if (this.resultHasTags(result, newState.selectedTags) && this.searchCompare(result, newState.query) > BASE_SIMILARITY) {\r\n                    searchResults.add(\r\n                        <SearchResultCard\r\n                            variant=\"recipe\"\r\n                            title={result.title}\r\n                            id={result.id}\r\n                            key={searchResults.size}\r\n                            overview={result.summary}\r\n                            tags={result.tags}\r\n                            resultImg={result.resultImg}>\r\n                        </SearchResultCard>\r\n                    );\r\n                }\r\n            });\r\n            pipeline.on('end', () => {\r\n                this.items = Array.from(searchResults);\r\n                if (this.items.length === 0) {\r\n                    this.items.push(<SearchResultCard\r\n                        variant=\"message\"\r\n                        message=\"No Results Found\"\r\n                        subMessage=\"Please change your filter or search to be more broad...\"\r\n                    ></SearchResultCard>);\r\n                }else{\r\n                    this.items.push(<SearchResultCard\r\n                        variant=\"message\"\r\n                        message=\"No More Results\"\r\n                        subMessage={`You have reached the end of the results for this search and filter. Recipes listed: ${this.items.length}`}\r\n                    ></SearchResultCard>);\r\n                }\r\n                newState = { ...newState, ...additionalState };\r\n                this.setState(newState);\r\n            })\r\n        });\r\n\r\n    }\r\n    resultHasTags(result: RecipeInfo & { id: string }, tags: Set<RecipeTag>): boolean {\r\n        let resultTags = new Set<RecipeTag>(result.tags);\r\n        for (let neededTag of tags) {\r\n            if (!resultTags.has(neededTag)) return false;\r\n        }\r\n        return true;\r\n    }\r\n    searchCompare(result: RecipeInfo & { id: string }, query: string): number {\r\n        if (query === \"\") return 1;\r\n        let maxSimilarity = -Infinity;\r\n        let currentSimilarity: number;\r\n        let { tags, title } = result;\r\n        for (let t in tags) {\r\n            currentSimilarity = this.stringSimilarity(tags[t], query);\r\n            maxSimilarity = (currentSimilarity > maxSimilarity) ? currentSimilarity : maxSimilarity;\r\n        }\r\n        let titleChunkArray = title.split(\" \");\r\n        titleChunkArray.push(title)\r\n        let titleArray: string[] = [];\r\n        for(let t in titleChunkArray){\r\n            for (let i = 1; i < titleChunkArray[t].length; i++) {\r\n                titleArray.push(titleChunkArray[t].substring(0, i + 1));\r\n            }\r\n        }\r\n        for (let t in titleArray) {\r\n            currentSimilarity = this.stringSimilarity(titleArray[t], query);\r\n            maxSimilarity = (currentSimilarity > maxSimilarity) ? currentSimilarity : maxSimilarity;\r\n        }\r\n        return maxSimilarity;\r\n    }\r\n    editDistance(s1: string, s2: string): number {\r\n        s1 = s1.toLowerCase();\r\n        s2 = s2.toLowerCase();\r\n\r\n        let costs = new Array<number>();\r\n        for (var i = 0; i <= s1.length; i++) {\r\n            let lastValue = i;\r\n            for (let j = 0; j <= s2.length; j++) {\r\n                if (i === 0)\r\n                    costs[j] = j;\r\n                else {\r\n                    if (j > 0) {\r\n                        let newValue = costs[j - 1];\r\n                        if (s1.charAt(i - 1) !== s2.charAt(j - 1))\r\n                            newValue = Math.min(Math.min(newValue, lastValue),\r\n                                costs[j]) + 1;\r\n                        costs[j - 1] = lastValue;\r\n                        lastValue = newValue;\r\n                    }\r\n                }\r\n            }\r\n            if (i > 0)\r\n                costs[s2.length] = lastValue;\r\n        }\r\n        return costs[s2.length];\r\n    }\r\n    stringSimilarity(s1: string, s2: string): number {\r\n        let longer = s1;\r\n        let shorter = s2;\r\n        if (s1.length < s2.length) {\r\n            longer = s2;\r\n            shorter = s1;\r\n        }\r\n        let longerLength = longer.length;\r\n        if (longerLength === 0) {\r\n            return 1.0;\r\n        }\r\n        return (longerLength - this.editDistance(longer, shorter)) / longerLength;\r\n    }\r\n    setModalOpen(shouldOpen: boolean) {\r\n        this.setState({ ...this.state, modalOpen: shouldOpen });\r\n    }\r\n    cancelFilter() {\r\n        this.unconfirmedSettings.query = this.state.query;\r\n        this.unconfirmedSettings.tags = this.state.selectedTags;\r\n        this.setModalOpen(false);\r\n    }\r\n    applyFilter() {\r\n        this.setState({ ...this.state, modalOpen: false, redirect: RedirectEnum.UPDATE_SETTINGS });\r\n    }\r\n    resizeListSpacing() {\r\n        listRef.current?.resetAfterIndex(0);\r\n    }\r\n    render() {\r\n        if (this.state.redirect === RedirectEnum.UPDATE_SETTINGS) {\r\n            let newQueryParams = new URLSearchParams();\r\n            if(this.unconfirmedSettings.query) newQueryParams.append(\"q\", this.unconfirmedSettings.query);\r\n            this.unconfirmedSettings.tags.forEach(value => {\r\n                newQueryParams.append(\"tags\", value);\r\n            });\r\n            this.setState({ ...this.state, redirect: RedirectEnum.STAY });\r\n            return <Redirect to={`/recipes?${newQueryParams.toString()}`} />;\r\n        }\r\n        return (\r\n            <div className={this.classes.root} ref={topRef}>\r\n                <div className={this.classes.results}>\r\n                    <SearchResultCard\r\n                        variant=\"recipe\"\r\n                        htmlId='calculatorResult'\r\n                        className={`${this.classes.sampleResult} ${this.classes.result}`}\r\n                        title=\"Sample\"\r\n                        id=\"sample\"\r\n                        overview=\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse nulla risus, congue non dignissim nec, commodo ac turpis. Morbi fringilla nunc ac lacinia facilisis. Nullam euismod at ligula quis placerat. Vestibulum fermentum ipsum ac ultrices hendrerit. Vivamus ultricies placerat feugiat. Pellentesque vestibulum massa ac urna tempor hendrerit. Sed enim elit.\"\r\n                        tags={[\"Recommended\"]}\r\n                        resultImg=\"https://i.imgur.com/I86rTVl.jpg\"></SearchResultCard>\r\n                    <AutoSizer>\r\n                        {({ height, width }) => (\r\n                            <VariableSizeList\r\n                                className={this.classes.list}\r\n                                ref={listRef}\r\n                                outerRef={outerListRef}\r\n                                height={height}\r\n                                width={width}\r\n                                itemCount={this.items.length}\r\n                                overscanCount={2}\r\n                                innerElementType={\r\n                                    forwardRef(({ style, ...rest }, ref) => (\r\n                                        <div\r\n                                            ref={ref}\r\n                                            style={{\r\n                                                ...style,\r\n                                                width: `65%`\r\n                                            }}\r\n                                            {...rest}\r\n                                        />\r\n                                    ))\r\n                                }\r\n                                onScroll={({ scrollOffset }) => {\r\n                                    if (scrollOffset > 0) {\r\n                                        this.setState({ ...this.state, showReturnTop: true });\r\n                                    } else {\r\n                                        this.setState({ ...this.state, showReturnTop: false });\r\n                                    }\r\n                                }}\r\n\r\n                                estimatedItemSize={0.25 * window.innerWidth}\r\n                                itemSize={(index) => this.getResultHeight(index)}>\r\n                                {({ index, style }) => {\r\n                                    return <div className={this.classes.result} style={style}>{this.items[index]}</div>\r\n                                }}\r\n                            </VariableSizeList>\r\n                        )}\r\n                    </AutoSizer>\r\n                </div>\r\n                <Fab size=\"large\" color=\"primary\" aria-label=\"filter\" className={`${this.classes.bigIcon} ${this.classes.filterFab}`} onClick={() => this.setModalOpen(true)}>\r\n                    <SvgIcon component={FilterSearchIcon} viewBox=\"0 0 24 24\"></SvgIcon>\r\n                </Fab>\r\n                <Zoom in={this.state.showReturnTop} >\r\n                    <Fab size=\"large\" color=\"primary\" aria-label=\"to top\" className={`${this.classes.bigIcon} ${this.classes.upFab}`} onClick={() => { outerListRef.current?.scrollTo({ behavior: \"smooth\", top: 0 }) }}>\r\n                        <KeyboardArrowUpIcon></KeyboardArrowUpIcon>\r\n                    </Fab>\r\n                </Zoom>\r\n                <SettingsDialog className={this.classes.filterDialog} title=\"Filter Search\" open={this.state.modalOpen} onApply={() => this.applyFilter()} onCancel={() => this.cancelFilter()}>\r\n                    <div className={this.classes.searchSection}>\r\n                        <Typography>By Keyword:</Typography>\r\n                        <SearchBar className={this.classes.searchBar} placeholder=\"Search Recipes...\" type=\"fixed\" callback={(value) => this.setQueryFilter(value)} initialValue={this.unconfirmedSettings.query}></SearchBar>\r\n                    </div>\r\n                    <div className={this.classes.tagSection}>\r\n                        <Tooltip title=\"No filter applied if no tags are selected\">\r\n                            <Typography>By Tag:</Typography>\r\n                        </Tooltip>\r\n                        {validTags.map((tag, i) => {\r\n                            let initialValue = false;\r\n                            if (this.unconfirmedSettings.tags.has(tag)) {\r\n                                initialValue = true;\r\n                            }\r\n                            return <TagChip variant=\"selector\" label={tag} key={i} className={this.classes.filterTag} onSelect={(label) => this.selectTag(label)} onDeselect={(label) => this.deselectTag(label)} initialValue={initialValue} />\r\n                        })}\r\n                    </div>\r\n                </SettingsDialog>\r\n            </div>\r\n\r\n        );\r\n    }\r\n    selectTag(label: RecipeTag) {\r\n        this.unconfirmedSettings.tags.add(label);\r\n    }\r\n    deselectTag(label: RecipeTag) {\r\n        this.unconfirmedSettings.tags.delete(label);\r\n    }\r\n    setQueryFilter(value: string) {\r\n        this.unconfirmedSettings.query = value;\r\n    }\r\n    getResultHeight(index: number): number {\r\n        let item = document.getElementById('calculatorResult') as Element;\r\n        let compStyle = window.getComputedStyle(item);\r\n        let heightString = item ? compStyle.height : \"0px\";\r\n        let marginString = item ? compStyle.paddingTop : \"0px\";\r\n        let result = parseFloat(heightString.substring(0, heightString.length - 2)) - parseFloat(marginString.substring(0, marginString.length - 2));\r\n\r\n        return result;\r\n    }\r\n}\r\nexport default withRouter(withStyles(useStyles)(SearchPage));","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\n\r\ninterface SettingsDialogProps{\r\n  onCancel: ()=>void;\r\n  onApply: ()=>void;\r\n  open: boolean;\r\n  title: string;\r\n  className ?: string;\r\n}\r\nexport default class SettingsDialog extends React.Component<SettingsDialogProps> {\r\n  render(){\r\n  return (\r\n      <Dialog className={this.props.className} open={this.props.open} onClose={()=>this.props.onCancel()} scroll=\"paper\">\r\n        <DialogTitle id=\"scroll-dialog-title\">{this.props.title}</DialogTitle>\r\n        <DialogContent>\r\n          {this.props.children}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={()=>this.props.onCancel()} color=\"secondary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={()=>this.props.onApply()} color=\"secondary\">\r\n            Apply\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n  );\r\n  }\r\n}"],"sourceRoot":""}